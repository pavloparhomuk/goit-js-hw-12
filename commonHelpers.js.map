{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst pixabayApi = async (searchrequest, page = 1, perPage = 15) => {\n  const response = await axios.get('https://pixabay.com/api/', {\n    params: {\n      key: '44369714-aeb99d27cdb76d6e65f8cf0da',\n      q: searchrequest,\n      image_type: 'photo',\n      page: page,\n      per_page: perPage,\n    },\n  });\n\n  if (response.status !== 200) {\n    throw new Error(response.status);\n  }\n\n  return response.data;\n};\n\nexport default pixabayApi;\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst render = (pictures, placeForContent) => {\n  placeForContent.insertAdjacentHTML('beforeend', makeMarkUp(pictures));\n  simpleGallery.refresh();\n};\n\nconst simpleGallery = new SimpleLightbox('.gallery-link', {\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n\nsimpleGallery.on('error.simplelightbox', function (e) {\n  console.log(e);\n});\n\nfunction makeMarkUp(pictures) {\n  return pictures.reduce(\n    (\n      acc,\n      { webformatURL, largeImageURL, tags, likes, views, comments, downloads }\n    ) =>\n      (acc += `<li class=\"gallery-item\">\n      <a class=\"gallery-link\" href=\"${largeImageURL}\">\n        <img\n          class=\"gallery-image\"\n          src=\"${webformatURL}\" \n          alt=\"${tags}\"\n        />\n        <div class=\"picture-describe\">\n        <span><span class=\"title\">Likes</span>${likes}</span>\n        <span><span class=\"title\">Views</span>${views}</span>\n        <span><span class=\"title\">Comments</span>${comments}</span>\n        <span><span class=\"title\">Downloads</span>${downloads}</span>\n        </div>\n      </a>\n    </li>`),\n    ``\n  );\n}\n\nexport default render;\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport pixabayApi from './js/pixabay-api';\nimport render from './js/render-functions';\n\nconst gallery = document.querySelector('.gallery');\nconst loader = document.createElement('div');\nloader.className = 'loader';\ngallery.appendChild(loader);\nconst loadMoreBtn = document.querySelector('.load-more');\nconst loadingMessage = document.getElementById('loading-message');\nlet currentPage = 1;\nlet currentSearch = '';\nlet totalHits = 0;\n\nconst errMessage = {\n  position: 'topRight',\n  theme: 'dark',\n  color: '#ef4040',\n  message:\n    'Sorry, there are no images matching your search query. Please try again!',\n};\n\ndocument.querySelector('form').addEventListener('submit', async event => {\n  event.preventDefault();\n  gallery.innerHTML = '';\n  currentPage = 1;\n  currentSearch = event.target.searchrequest.value;\n\n  await fetchImages(currentSearch);\n  event.target.reset();\n});\n\nloadMoreBtn.addEventListener('click', () => {\n  fetchImages(currentSearch);\n});\n\nconst fetchImages = async searchQuery => {\n  loader.style.display = 'flex';\n  loadMoreBtn.style.display = 'none';\n  loadingMessage.style.display = 'block';\n\n  try {\n    const data = await pixabayApi(searchQuery, currentPage);\n    loader.style.display = 'none';\n    loadingMessage.style.display = 'none';\n\n    if (data.hits.length === 0 && currentPage === 1) {\n      iziToast.error(errMessage);\n      loadMoreBtn.style.display = 'none';\n      return;\n    }\n\n    if (data.hits.length > 0) {\n      render(data.hits, gallery);\n      currentPage += 1;\n      totalHits = data.totalHits;\n\n      if (currentPage > Math.ceil(totalHits / 15)) {\n        loadMoreBtn.style.display = 'none';\n        iziToast.info({\n          position: 'topRight',\n          theme: 'dark',\n          color: '#007bff',\n          message: \"We're sorry, but you've reached the end of search results.\",\n        });\n      } else if (data.hits.length < 15 && currentPage === 2) {\n        loadMoreBtn.style.display = 'none';\n        iziToast.info({\n          position: 'topRight',\n          theme: 'dark',\n          color: '#007bff',\n          message: \"We're sorry, but you've reached the end of search results.\",\n        });\n      } else {\n        loadMoreBtn.style.display = 'block';\n      }\n    }\n  } catch (error) {\n    loader.style.display = 'none';\n    loadingMessage.style.display = 'none';\n    gallery.innerHTML =\n      'Something went wrong. <br/>Please, check your connection and try again.';\n    console.error(error);\n  }\n};\n\nconst colorSwitcher = document.querySelector('.slide');\nif (colorSwitcher) {\n  colorSwitcher.addEventListener('click', e => {\n    document.body.classList.toggle('black');\n    document.body.firstElementChild.classList.toggle('black');\n    document.getElementById('searchrequest').classList.toggle('black');\n    e.target.firstElementChild.checked = !e.target.firstElementChild.checked;\n  });\n\n  setTimeout(() => {\n    colorSwitcher.style.opacity = '0.1';\n  }, 5000);\n}\n"],"names":["pixabayApi","searchrequest","page","perPage","response","axios","render","pictures","placeForContent","makeMarkUp","simpleGallery","SimpleLightbox","acc","webformatURL","largeImageURL","tags","likes","views","comments","downloads","gallery","loader","loadMoreBtn","loadingMessage","currentPage","currentSearch","totalHits","errMessage","event","fetchImages","searchQuery","data","iziToast","error","colorSwitcher"],"mappings":"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"}